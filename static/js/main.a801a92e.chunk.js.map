{"version":3,"sources":["test.jsx","App.jsx","index.js"],"names":["L","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","bounds","test","state","adminMode","count","_editableFG","onClickAdminButton","_this","console","log","_onEdited","e","numEdited","layers","eachLayer","layer","concat","_onChange","_onCreated","type","layerType","bindTooltip","bindPopup","_onDeleted","numDeleted","_onMounted","drawControl","_onEditStart","_onEditStop","_onDeleteStart","_onDeleteStop","_onFeatureGroupReady","reactFGref","leafletGeoJSON","GeoJSON","getGeoJson","leafletFG","leafletElement","addLayer","onChange","props","toGeoJSON","_this2","this","react_default","a","createElement","onClick","Map","crs","CRS","Simple","center","zoom","ImageOverlay","url","FeatureGroup","ref","esm","position","onEdited","onCreated","onDeleted","onMounted","onEditStart","onEditStop","onDeleteStart","onDeleteStop","draw","rectangle","Component","features","properties","geometry","coordinates","App","src_test","rootElement","document","getElementById","ReactDOM","render","src_App_0"],"mappings":"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","file":"static/js/main.a801a92e.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  Map,\r\n  TileLayer,\r\n  Circle,\r\n  FeatureGroup,\r\n  ImageOverlay,\r\n  Popup,\r\n} from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\nimport { EditControl } from \"react-leaflet-draw\";\r\n\r\n// work around broken icons when using webpack, see https://github.com/PaulLeCam/react-leaflet/issues/255\r\n\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.0/images/marker-icon.png\",\r\n  iconUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.0/images/marker-icon.png\",\r\n  shadowUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.0/images/marker-shadow.png\",\r\n});\r\n\r\nconst bounds = [\r\n  [0, 0],\r\n  [285, 400],\r\n];\r\n\r\nclass test extends Component {\r\n  // see http://leaflet.github.io/Leaflet.draw/docs/leaflet-draw-latest.html#l-draw-event for leaflet-draw events doc\r\n\r\n  state = {\r\n    adminMode: true,\r\n    count: 0,\r\n  };\r\n\r\n  _editableFG = null;\r\n\r\n  onClickAdminButton = () => {\r\n    this.state.adminMode = !this.state.adminMode;\r\n    console.log(this.state.adminMode);\r\n  };\r\n\r\n  _onEdited = (e) => {\r\n    let numEdited = 0;\r\n    e.layers.eachLayer((layer) => {\r\n      numEdited += 1;\r\n    });\r\n    console.log(`_onEdited: edited ${numEdited} layers`, e);\r\n\r\n    this._onChange();\r\n  };\r\n\r\n  _onCreated = (e) => {\r\n    let type = e.layerType;\r\n    let layer = e.layer;\r\n\r\n    this.state.count = this.state.count + 1;\r\n    if (type === \"marker\") {\r\n      // Do marker specific actions\r\n      console.log(\"_onCreated: marker created\", e);\r\n\r\n      layer.bindTooltip(\"dupa\" + this.state.count);\r\n      layer.bindPopup(\"dupa 2\");\r\n    } else {\r\n      console.log(\"_onCreated: something else created:\", type, e);\r\n      layer.bindTooltip(\"dupa\" + this.state.count);\r\n    }\r\n    // Do whatever else you need to. (save to db; etc)\r\n\r\n    this._onChange();\r\n    console.log(\"EFG\");\r\n    console.log(this._editableFG);\r\n  };\r\n\r\n  _onDeleted = (e) => {\r\n    let numDeleted = 0;\r\n    e.layers.eachLayer((layer) => {\r\n      numDeleted += 1;\r\n    });\r\n    console.log(`onDeleted: removed ${numDeleted} layers`, e);\r\n\r\n    this._onChange();\r\n  };\r\n\r\n  _onMounted = (drawControl) => {\r\n    console.log(\"_onMounted\", drawControl);\r\n  };\r\n\r\n  _onEditStart = (e) => {\r\n    console.log(\"_onEditStart\", e);\r\n  };\r\n\r\n  _onEditStop = (e) => {\r\n    console.log(\"_onEditStop\", e);\r\n  };\r\n\r\n  _onDeleteStart = (e) => {\r\n    console.log(\"_onDeleteStart\", e);\r\n  };\r\n\r\n  _onDeleteStop = (e) => {\r\n    console.log(\"_onDeleteStop\", e);\r\n  };\r\n\r\n  _onFeatureGroupReady = (reactFGref) => {\r\n    // populate the leaflet FeatureGroup with the geoJson layers\r\n\r\n    let leafletGeoJSON = new L.GeoJSON(getGeoJson());\r\n    let leafletFG = reactFGref.leafletElement;\r\n\r\n    leafletGeoJSON.eachLayer((layer) => {\r\n      console.log(layer);\r\n      leafletFG.addLayer(layer);\r\n    });\r\n\r\n    // store the ref for future access to content\r\n\r\n    this._editableFG = reactFGref;\r\n  };\r\n\r\n  _onChange = () => {\r\n    // this._editableFG contains the edited geometry, which can be manipulated through the leaflet API\r\n\r\n    const { onChange } = this.props;\r\n\r\n    if (!this._editableFG || !onChange) {\r\n      return;\r\n    }\r\n\r\n    const geojsonData = this._editableFG.leafletElement.toGeoJSON();\r\n    onChange(geojsonData);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <button onClick={this.onClickAdminButton}>admin mode</button>\r\n        <Map crs={L.CRS.Simple} center={[156.45, 194.49]} zoom={0.7}>\r\n          <ImageOverlay\r\n            bounds={bounds}\r\n            url=\"https://external-preview.redd.it/w9BVe9tGxELJs1GvR-50pCzPFlmeRj5h6ma8tN93SB0.jpg?auto=webp&s=c272d3687d831f334a1c7e32d9a7431b3d22040f\"\r\n          />\r\n\r\n          <FeatureGroup\r\n            ref={(reactFGref) => {\r\n              this._onFeatureGroupReady(reactFGref);\r\n            }}\r\n          >\r\n            {this.state.adminMode ? (\r\n              <EditControl\r\n                position=\"topright\"\r\n                onEdited={this._onEdited}\r\n                onCreated={this._onCreated}\r\n                onDeleted={this._onDeleted}\r\n                onMounted={this._onMounted}\r\n                onEditStart={this._onEditStart}\r\n                onEditStop={this._onEditStop}\r\n                onDeleteStart={this._onDeleteStart}\r\n                onDeleteStop={this._onDeleteStop}\r\n                draw={{\r\n                  rectangle: false,\r\n                }}\r\n              />\r\n            ) : null}\r\n          </FeatureGroup>\r\n        </Map>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default test;\r\n\r\nconst getGeoJson = () => {\r\n  return {\r\n    type: \"FeatureCollection\",\r\n    features: [\r\n      {\r\n        type: \"Feature\",\r\n        properties: {},\r\n        geometry: {\r\n          type: \"LineString\",\r\n          coordinates: [\r\n            [82.69, 205.25],\r\n            [212.88, 54.8],\r\n          ],\r\n        },\r\n      },\r\n      {\r\n        type: \"Feature\",\r\n        properties: {},\r\n        geometry: {\r\n          type: \"Point\",\r\n          coordinates: [82.69, 205.25],\r\n        },\r\n      },\r\n\r\n      {\r\n        type: \"Feature\",\r\n        properties: {},\r\n        geometry: {\r\n          type: \"Point\",\r\n          coordinates: [212.88, 54.8],\r\n        },\r\n      },\r\n      {\r\n        type: \"Feature\",\r\n        properties: {},\r\n        geometry: {\r\n          type: \"Polygon\",\r\n          coordinates: [\r\n            [\r\n              [130.68, 167.36],\r\n              [142.64, 168.07],\r\n              [141.16, 180.65],\r\n              [135.76, 187.37],\r\n              [131.07, 176.74],\r\n            ],\r\n          ],\r\n        },\r\n      },\r\n    ],\r\n  };\r\n};\r\n","import React, { Fragment } from \"react\";\r\n\r\nimport \"./App.css\";\r\n\r\nimport { Map, TileLayer } from \"react-leaflet\";\r\nimport Test from \"./test\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <div>\r\n      <h1>React Leaflet Map of Poland</h1>\r\n      <Test />\r\n    </div>\r\n  );\r\n};\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport \"./styles.css\";\r\nimport \"react-leaflet-fullscreen/dist/styles.css\";\r\n\r\nimport App from \"./App\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(<App />, rootElement);\r\n"],"sourceRoot":""}